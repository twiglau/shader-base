# 物体光照计算组成部分
* 颜色 = 物体自发光 + 镜面(Specular)反射 + 漫(Diffuse)反射 + 环境遮挡 + 环境光   

# 物体主要光照计算的实现原理:  
1. 物体自发光: 颜色值 + 发光纹理
2. 镜面反射: 计算 (PBR, 基于经验模型)
3. 漫反射: 计算; (PBR, 基于经验模型)
4. 自己这个物体的环境遮挡, 遮挡数值, 环境遮挡贴图;
5. 环境光: 全局变量, 引擎场景的时候,可以设置得到;
> 光 => 白光 => 蓝色的物体 => 蓝色的光, R, G, 分量吸收掉;
6. 物体本色: baseColor, 纹理贴图;

# RBR (Physically Based Rendering) - 基于物理的渲染, 两种美术工作流:
* 基于物理的原理, 来模拟计算光的反射, 能量守恒;
* 算法: 可以调整算法一些参数, 与反射是有直接关系的;
* 调整反射的方式不一样, 我们把PBR分成两种模式: 美术工作流- 美术指导那些规格的数据给你, 能使用PBR; PBR两个方向:
1. Metalness-roughness workflow,`金属与粗糙度工作流` => 基于金属与粗糙度的 PBR Shader (Metalness). 颜色贴图(Albedo/Diffuse/BaseColor), 金属度(Metallic|Metalness), 粗糙度(Roughness), 法线贴图. `高模, 低模`;
> 高模: 三角形多, 细节就越好, 计算开销大;
> 低模: 三角形少, 细节没有高模那么多, 计算开销会小些;
> 颜色贴图(baseColor): 本来物体的材质颜色;
> 金属度: 模拟光线反射的强度, 金属度, 我们是一个数值就可以了; 0~1. => 贴图: 皮肤(0), 金属盔甲(1) => 贴图来表示;
> 粗糙度: 更多细节, 模拟我们的满反射;
> 法线贴图: 能让我们在不增加三角形面数的情况下, 让物体表面有更多的细节和层次, 不用高模那样的计算量,获得很好的细节;  
> 总结: (1) 得到普通的颜色贴图; (2) 调物体的金属度, 反射相关的调整;
> 比较: 优: 1. 更容易创作, 各个贴图是独立分开的. 2.纹理占用内存少, 因为金属和粗糙度贴图都是 `灰度图`(单通道). 3.更广泛被使用; 缺: 1.边缘的伪像更明显,尤其是分辨率较低的时候;

2. specular-smoothness workflow -`反射与光泽度工作流`; => 接近于我们真实的物理的实际情况. PBR Shader(Specular)  
* 漫反射 (Diffuse), 反射 (Specular), 光泽度 (Glossiness/Smoothness), 法线贴图.
* 优点: 1.边缘伪影不明显 2.控制灵活 
* 缺点: 1.灵活控制可能导致不遵守能量守恒破幻PBR原则 2. RGB贴图多, 占用内存


# 细节增强: `法线贴图` 与 `高度贴图`  

# 总结 - PBR:
* 支持度:
- Unity: 支持: `金属度与粗糙度`工作流, `反射与光泽度`工作流 => shader 直接使用就可以了;
- Cocos: 仅支持 `金属度与粗糙度`工作流; -> 内置Shader直接使用, 也可以自己写代码来做PBR; 
- Laya:  支持金属度与粗糙度
- UE4: 相同Laya;

* PBR -美术要给我们提供那些数据;
- 自发光: 1. 发光的`颜色`, 2.发光的`贴图`;
- 物体本色: baseColor, Diffuse, Albedo, 颜色 => `贴图`;
- 反射:  
> 金属度: 1. `数值`就可以, 2.金属度的`贴图`, r,(0-1) => 映射到我们的范围; => 我们的片元金属度是多少;  
> 粗糙度: 1. `数值`就可以, 2.金属度的`贴图`, r,(0-1) => 映射到我们的范围; => 我们的片元的粗糙度是多少;
> 基于物理的公式 => 反射光的颜色的值;  

- 环境遮挡: 1. 数值`系数`, 2. 环境`贴图`;
- 环境光: 计算光照的时候, `法线贴图`, `高度贴图`,增加细节; => 计算;